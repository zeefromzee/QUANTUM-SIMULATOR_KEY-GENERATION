<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Figure 5: KDF Robustness Assessment</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Chart.js for visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
        /* Custom styles for the chart container */
        .chart-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4 font-sans">

    <div class="chart-container">
        <h1 class="text-xl md:text-2xl font-extrabold text-center text-gray-800 mb-6">
            Figure 5: Validation of KDF Robustness (NIST Pass Rate Comparison)
        </h1>
        <div class="relative h-[450px] md:h-[600px]">
            <canvas id="nistPassRateChart"></canvas>
        </div>

        <div class="mt-8 p-4 bg-gray-100 rounded-lg border-l-4 border-blue-500">
            <p class="text-sm text-gray-700 font-semibold">Key Finding:</p>
            <p class="text-sm text-gray-600">The shift from Group D's Failure (0% pass rate) to Group E's Successful Recovery (near 100% pass rate) validates the effectiveness of the CSPRNG fallback mechanism when the primary physical entropy source is compromised (covered webcam).</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Data from the original Python script
            const tests = [
                'Monobit', 
                'Runs', 
                'Longest Run', 
                'Spectral (DFT)', 
                'Approx. Entropy'
            ];

            const passRatesA = [99.0, 99.0, 99.2, 98.4, 95.6]; // Group A (Baseline TRNG)
            const passRatesD = [0.0, 0.0, 0.0, 0.0, 0.0];      // Group D (TRNG FAIL - Zero Entropy)
            const passRatesE = [100.0, 100.0, 99.5, 98.5, 96.0]; // Group E (CSPRNG Robustness)

            const ctx = document.getElementById('nistPassRateChart').getContext('2d');

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: tests,
                    datasets: [
                        {
                            label: 'Group A (Baseline TRNG)',
                            data: passRatesA,
                            backgroundColor: '#4CAF50', // Green
                            borderRadius: 6,
                        },
                        {
                            label: 'Group D (TRNG FAIL - Zero Entropy)',
                            data: passRatesD,
                            backgroundColor: '#F44336', // Red
                            borderRadius: 6,
                        },
                        {
                            label: 'Group E (CSPRNG Robust - Key Secure)',
                            data: passRatesE,
                            backgroundColor: '#2196F3', // Blue
                            borderRadius: 6,
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false, // Allows the chart to fill the container height
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        title: {
                            display: false, // Title is handled in HTML H1 tag
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 105,
                            title: {
                                display: true,
                                text: 'Pass Rate (%)',
                                font: { weight: 'bold', size: 14 }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)',
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'NIST Statistical Test',
                                font: { weight: 'bold', size: 14 }
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>